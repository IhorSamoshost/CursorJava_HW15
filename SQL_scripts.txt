CREATE SCHEMA `my_library` DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ;

CREATE TABLE `my_library`.`readers` (
  `idreader` INT NOT NULL AUTO_INCREMENT,
  `reader_name` VARCHAR(45) NULL,
  PRIMARY KEY (`idreader`),
  UNIQUE INDEX `idreader_UNIQUE` (`idreader` ASC) VISIBLE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;

CREATE TABLE `my_library`.`book_table` (
  `idbook` INT NOT NULL AUTO_INCREMENT,
  `book_title` VARCHAR(45) NULL,
  `idreader` INT NULL,
  PRIMARY KEY (`idbook`),
  UNIQUE INDEX `idbook_UNIQUE` (`idbook` ASC) VISIBLE,
  INDEX `reader_idx` (`idreader` ASC) VISIBLE,
  CONSTRAINT `reader`
    FOREIGN KEY (`idreader`)
    REFERENCES `my_library`.`readers` (`idreader`)
    ON DELETE SET NULL
    ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;

CREATE TABLE `my_library`.`author_table` (
  `idauthor` INT NOT NULL AUTO_INCREMENT,
  `name_author` VARCHAR(45) NULL,
  `id_written_book` INT NULL,
  PRIMARY KEY (`idauthor`),
  UNIQUE INDEX `idauthor_UNIQUE` (`idauthor` ASC) VISIBLE,
  INDEX `written_book_idx` (`id_written_book` ASC) VISIBLE,
  CONSTRAINT `written_book`
    FOREIGN KEY (`id_written_book`)
    REFERENCES `my_library`.`book_table` (`idbook`)
    ON DELETE SET NULL
    ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;
